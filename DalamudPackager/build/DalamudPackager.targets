<?xml version="1.0" encoding="utf-8"?>
<Project>
    <PropertyGroup>
        <PackagerTargetFile>$(ProjectDir)DalamudPackager.targets</PackagerTargetFile>
    </PropertyGroup>

    <Import Project="$(PackagerTargetFile)" Condition="Exists('$(PackagerTargetFile)')"/>

    <Target Name="RunDalamudPackager">
        <DalamudPackager ProjectDir="$(ProjectDir)"
                         OutputPath="$(OutputPath)"
                         AssemblyName="$(AssemblyName)"
                         MakeZip="$(MakeZip)"
                         Author="$(Author)"
                         Name="$(Name)"
                         InternalName="$(InternalName)"
                         AssemblyVersion="$(AssemblyVersion)"
                         MinimumDalamudVersion="$(MinimumDalamudVersion)"
                         Punchline="$(Punchline)"
                         Description="$(Description)"
                         ApplicableVersion="$(ApplicableVersion)"
                         RepoUrl="$(RepoUrl)"
                         Tags="$(Tags)"
                         CategoryTags="$(CategoryTags)"
                         DalamudApiLevel="$(DalamudApiLevel)"
                         LoadRequiredState="$(LoadRequiredState)"
                         LoadSync="$(LoadSync)"
                         CanUnloadAsync="$(CanUnloadAsync)"
                         LoadPriority="$(LoadPriority)"
                         ImageUrls="$(ImageUrls)"
                         IconUrl="$(IconUrl)"
                         Changelog="$(Changelog)"
                         AcceptsFeedback="$(AcceptsFeedback)"
                         FeedbackMessage="$(FeedbackMessage)" />
    </Target>

    <Target Name="DefaultDalamudPackagerDebug"
            AfterTargets="Build"
            Condition="'$(Configuration)' == 'Debug' and !Exists('$(PackagerTargetFile)')">
        <PropertyGroup>
            <MakeZip>false</MakeZip>
        </PropertyGroup>
        <CallTarget Targets="RunDalamudPackager" />
    </Target>

    <Target Name="DefaultDalamudPackagerRelease"
            AfterTargets="Build"
            Condition="'$(Configuration)' == 'Release' and !Exists('$(PackagerTargetFile)')">
        <PropertyGroup>
            <MakeZip>true</MakeZip>
        </PropertyGroup>
        <CallTarget Targets="RunDalamudPackager" />
    </Target>
</Project>